<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cuit.hyl.graduation.project_ui.dao.BasicInfoDao">

    <resultMap type="cuit.hyl.graduation.project_ui.entity.vo.InitInfo" id="InitInfoMap">
        <result property="id" column="ID" jdbcType="INTEGER"/>
        <result property="name" column="NAME" jdbcType="VARCHAR"/>
        <result property="nickName" column="NICK_NAME" jdbcType="VARCHAR"/>
        <result property="avatatUrl" column="AVATAT_URL" jdbcType="VARCHAR"/>
        <result property="blog" column="BLOG" jdbcType="VARCHAR"/>
        <result property="icon" column="ICON" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap type="cuit.hyl.graduation.project_ui.entity.School" id="SchoolMap">
        <result property="id" column="ID" jdbcType="INTEGER"/>
        <result property="name" column="NAME" jdbcType="VARCHAR"/>
        <result property="code" column="CODE" jdbcType="INTEGER"/>
        <result property="address" column="ADDRESS" jdbcType="VARCHAR"/>
        <result property="icon" column="ICON" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap type="cuit.hyl.graduation.project_ui.entity.BasicInfo" id="BasicInfoMap">
        <result property="id" column="ID" jdbcType="INTEGER"/>
        <result property="name" column="NAME" jdbcType="VARCHAR"/>
        <result property="nickName" column="NICK_NAME" jdbcType="VARCHAR"/>
        <result property="sex" column="SEX" jdbcType="INTEGER"/>
        <result property="birthday" column="BIRTHDAY" jdbcType="DATE"/>
        <result property="politicalStatus" column="POLITICAL_STATUS" jdbcType="VARCHAR"/>
        <result property="age" column="AGE" jdbcType="INTEGER"/>
        <result property="hometown" column="HOMETOWN" jdbcType="VARCHAR"/>
        <result property="avatatUrl" column="AVATAT_URL" jdbcType="VARCHAR"/>
        <result property="phone" column="PHONE" jdbcType="VARCHAR"/>
        <result property="fax" column="FAX" jdbcType="VARCHAR"/>
        <result property="email" column="EMAIL" jdbcType="VARCHAR"/>
        <result property="qq" column="QQ" jdbcType="VARCHAR"/>
        <result property="wechat" column="WECHAT" jdbcType="VARCHAR"/>
        <result property="blog" column="BLOG" jdbcType="VARCHAR"/>
        <result property="postCode" column="POST_CODE" jdbcType="VARCHAR"/>
        <result property="address" column="ADDRESS" jdbcType="VARCHAR"/>
        <result property="department" column="DEPARTMENT" jdbcType="VARCHAR"/>
        <result property="degree" column="DEGREE" jdbcType="VARCHAR"/>
        <result property="subject" column="SUBJECT" jdbcType="VARCHAR"/>
        <result property="position" column="POSITION" jdbcType="VARCHAR"/>
        <result property="jobTitle" column="JOB_TITLE" jdbcType="VARCHAR"/>
        <result property="introduction" column="INTRODUCTION" jdbcType="OTHER"/>
        <result property="researchAreas" column="RESEARCH_AREAS" jdbcType="OTHER"/>
        <result property="unitId" column="UNIT_ID" jdbcType="INTEGER"/>
        <result property="schoolId" column="SCHOOL_ID" jdbcType="INTEGER"/>
        <result property="peopleId" column="PEOPLE_ID" jdbcType="INTEGER"/>
    </resultMap>

    <!--通过用户id 查询-->
    <select id="queryByPeopleId" resultMap="BasicInfoMap">
        select
          ID, NAME, NICK_NAME, SEX, BIRTHDAY, POLITICAL_STATUS, AGE, HOMETOWN, AVATAT_URL, PHONE, FAX, EMAIL, QQ, WECHAT, BLOG, POST_CODE, ADDRESS, DEPARTMENT, DEGREE, SUBJECT, POSITION, JOB_TITLE, INTRODUCTION, RESEARCH_AREAS, UNIT_ID, SCHOOL_ID, PEOPLE_ID
        from graduation_ui.basic_info
        where PEOPLE_ID = #{id}
        order by TIME desc
    </select>

    <!--通过用户id 查询初始化信息-->
    <select id="queryInitInfo" resultMap="InitInfoMap">
        SELECT
            BI.ID,
            BI.NAME,
            BI.NICK_NAME,
            BI.AVATAT_URL,
            BI.BLOG,
            S.ICON
        FROM
            graduation_ui.basic_info AS BI
            LEFT JOIN graduation_ui.school AS S
            ON BI.SCHOOL_ID = S.id
        WHERE
            PEOPLE_ID = #{id}
        order by TIME desc
    </select>

    <insert id="easyPoiExcelImport">
        INSERT INTO graduation_ui.basic_info (ID,NAME,NICK_NAME,SEX,BIRTHDAY,POLITICAL_STATUS,AGE,HOMETOWN,AVATAT_URL,PHONE,FAX,EMAIL,QQ,WECHAT,BLOG,POST_CODE,ADDRESS,DEPARTMENT,DEGREE,SUBJECT,POSITION,JOB_TITLE,INTRODUCTION,RESEARCH_AREAS,UNIT_ID,SCHOOL_ID,PEOPLE_ID)
        VALUES
        <foreach collection="list" item="basicInfo" separator=",">
            (#{basicInfo.id},#{basicInfo.name},#{basicInfo.nickName},#{basicInfo.sex},#{basicInfo.birthday},#{basicInfo.politicalStatus},
            #{basicInfo.age},#{basicInfo.hometown},#{basicInfo.avatatUrl},#{basicInfo.phone},#{basicInfo.fax},#{basicInfo.email},
            #{basicInfo.qq},#{basicInfo.wechat},#{basicInfo.blog},#{basicInfo.postCode},#{basicInfo.address},#{basicInfo.department},
            #{basicInfo.degree},#{basicInfo.subject},#{basicInfo.position},#{basicInfo.jobTitle},#{basicInfo.introduction},#{basicInfo.researchAreas},
            #{basicInfo.unitId},#{basicInfo.schoolId},#{basicInfo.peopleId})
        </foreach>
    </insert>

    <insert id="excelImport">
        INSERT INTO graduation_ui.basic_info (
        ID,
        NAME,
        NICK_NAME,
        SEX,
        BIRTHDAY,
        POLITICAL_STATUS,
        AGE,
        HOMETOWN,
        AVATAT_URL,
        PHONE,
        FAX,
        EMAIL,
        QQ,
        WECHAT,
        BLOG,
        POST_CODE,
        ADDRESS,
        DEPARTMENT,
        DEGREE,
        SUBJECT,
        POSITION,
        JOB_TITLE,
        INTRODUCTION,
        RESEARCH_AREAS,
        UNIT_ID,
        SCHOOL_ID,
        PEOPLE_ID
        )
        VALUES
        <foreach collection="list" item="basicInfo" separator=",">
            (#{basicInfo.id},#{basicInfo.name},#{basicInfo.nickName},#{basicInfo.sex},#{basicInfo.birthday},#{basicInfo.politicalStatus},
            #{basicInfo.age},#{basicInfo.hometown},#{basicInfo.avatatUrl},#{basicInfo.phone},#{basicInfo.fax},#{basicInfo.email},
            #{basicInfo.qq},#{basicInfo.wechat},#{basicInfo.blog},#{basicInfo.postCode},#{basicInfo.address},#{basicInfo.department},
            #{basicInfo.degree},#{basicInfo.subject},#{basicInfo.position},#{basicInfo.jobTitle},#{basicInfo.introduction},#{basicInfo.researchAreas},
            #{basicInfo.unitId},#{basicInfo.schoolId},#{basicInfo.peopleId})
        </foreach>
        <!--<trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null and '' != id">
                id,
            </if>
            <if test="name != null and '' != name">
                name,
            </if>
            <if test="nickName != null and '' != nickName">
                nickName,
            </if>
            <if test="sex != null and '' != sex">
                sex,
            </if>
            <if test="birthday != null and '' != birthday">
                birthday,
            </if>
            <if test="politicalStatus != null and '' != politicalStatus">
                politicalStatus,
            </if>
            <if test="age != null and '' != age">
                age,
            </if>
            <if test="hometown != null and '' != hometown">
                hometown,
            </if>
            <if test="avatatUrl != null and '' != avatatUrl">
                avatatUrl,
            </if>
            <if test="phone != null and '' != phone">
                phone,
            </if>
            <if test="fax != null and '' != fax">
                fax,
            </if>
            <if test="email != null and '' != email">
                email,
            </if>
            <if test="qq != null and '' != qq">
                qq,
            </if>
            <if test="wechat != null and '' != wechat">
                wechat,
            </if>
            <if test="blog != null and '' != blog">
                blog,
            </if>
            <if test="postCode != null and '' != postCode">
                postCode,
            </if>
            <if test="address != null and '' != address">
                address,
            </if>
            <if test="department != null and '' != department">
                department,
            </if>
            <if test="degree != null and '' != degree">
                degree,
            </if>
            <if test="subject != null and '' != subject">
                subject,
            </if>
            <if test="position != null and '' != position">
                position,
            </if>
            <if test="jobTitle != null and '' != jobTitle">
                jobTitle,
            </if>
            <if test="introduction != null and '' != introduction">
                introduction,
            </if>
            <if test="researchAreas != null and '' != researchAreas">
                researchAreas,
            </if>
            <if test="unitId != null and '' != unitId">
                unitId,
            </if>
            <if test="schoolId != null and '' != schoolId">
                schoolId,
            </if>
            <if test="peopleId != null and '' != peopleId">
                peopleId,
            </if>
        </trim>
        VALUES
        <foreach collection="list" item="basicInfo" separator=",">
            <trim prefix=" (" suffix=")" suffixOverrides=",">
                <if test="basicInfo.id != null and '' != basicInfo.id">
                    #{basicInfo.id},
                </if>
                <if test="basicInfo.name != null and '' != basicInfo.name">
                    #{basicInfo.name},
                </if>
                <if test="basicInfo.nickName != null and '' != basicInfo.nickName">
                    #{basicInfo.nickName},
                </if>
                <if test="basicInfo.sex != null and '' != basicInfo.sex">
                    #{basicInfo.sex},
                </if>
                <if test="basicInfo.birthday != null and '' != basicInfo.birthday">
                    #{basicInfo.birthday},
                </if>
                <if test="basicInfo.politicalStatus != null and '' != basicInfo.politicalStatus">
                    #{basicInfo.politicalStatus},
                </if>
                <if test="basicInfo.age != null and '' != basicInfo.age">
                    #{basicInfo.age},
                </if>
                <if test="basicInfo.hometown != null and '' != basicInfo.hometown">
                    #{basicInfo.hometown},
                </if>
                <if test="basicInfo.avatatUrl != null and '' != basicInfo.avatatUrl">
                    #{basicInfo.avatatUrl},
                </if>
                <if test="basicInfo.phone != null and '' != basicInfo.phone">
                    #{basicInfo.phone},
                </if>
                <if test="basicInfo.fax != null and '' != basicInfo.fax">
                    #{basicInfo.fax},
                </if>
                <if test="basicInfo.email != null and '' != basicInfo.email">
                    #{basicInfo.email},
                </if>
                <if test="basicInfo.qq != null and '' != basicInfo.qq">
                    #{basicInfo.qq},
                </if>
                <if test="basicInfo.wechat != null and '' != basicInfo.wechat">
                    #{basicInfo.wechat},
                </if>
                <if test="basicInfo.blog != null and '' != basicInfo.blog">
                    #{basicInfo.blog},
                </if>
                <if test="basicInfo.postCode != null and '' != basicInfo.postCode">
                    #{basicInfo.postCode},
                </if>
                <if test="basicInfo.address != null and '' != basicInfo.address">
                    #{basicInfo.address},
                </if>
                <if test="basicInfo.department != null and '' != basicInfo.department">
                    #{basicInfo.department},
                </if>
                <if test="basicInfo.degree != null and '' != basicInfo.degree">
                    #{basicInfo.degree},
                </if>
                <if test="basicInfo.subject != null and '' != basicInfo.subject">
                    #{basicInfo.subject},
                </if>
                <if test="basicInfo.position != null and '' != basicInfo.position">
                    #{basicInfo.position},
                </if>
                <if test="basicInfo.jobTitle != null and '' != basicInfo.jobTitle">
                    #{basicInfo.jobTitle},
                </if>
                <if test="basicInfo.introduction != null and '' != basicInfo.introduction">
                    #{basicInfo.introduction},
                </if>
                <if test="basicInfo.researchAreas != null and '' != basicInfo.researchAreas">
                    #{basicInfo.researchAreas},
                </if>
                <if test="basicInfo.unitId != null and '' != basicInfo.unitId">
                    #{basicInfo.unitId},
                </if>
                <if test="basicInfo.schoolId != null and '' != basicInfo.schoolId">
                    #{basicInfo.schoolId},
                </if>
                <if test="basicInfo.peopleId != null and '' != basicInfo.peopleId">
                    #{basicInfo.peopleId},
                </if>
            </trim>
        </foreach>-->
    </insert>


    <!-- -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <!--查询学校信息-->
    <select id="schoolInfo" resultMap="SchoolMap">
        SELECT
            s.`NAME`,
            s.ADDRESS,
            s.`CODE`,
            s.ICON
        FROM
            graduation_ui.school AS s
                LEFT JOIN basic_info AS bi ON s.`CODE` = bi.SCHOOL_ID
        WHERE
            bi.ID = #{id}
    </select>


</mapper>